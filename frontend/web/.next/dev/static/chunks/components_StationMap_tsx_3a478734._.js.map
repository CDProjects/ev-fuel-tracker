{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/email/Projects/ev-fuel-tracker/frontend/web/components/StationMap.tsx"],"sourcesContent":["// frontend/web/components/StationMap.tsx\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\r\nimport { LatLngBounds, LatLngExpression } from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\ninterface Station {\r\n  id: number;\r\n  location: string;\r\n  provider: string;\r\n  price: number;\r\n  lat: number;\r\n  lng: number;\r\n}\r\n\r\ninterface StationMapProps {\r\n  stations: Station[];\r\n  center: LatLngExpression;\r\n  zoom?: number;\r\n}\r\n\r\n/* -------------------------------\r\n   Component to auto-fit map bounds\r\n-------------------------------- */\r\nfunction FitBounds({ stations }: { stations: Station[] }) {\r\n  const map = useMap();\r\n\r\n  useEffect(() => {\r\n    if (!stations || stations.length === 0) return;\r\n\r\n    const bounds = new LatLngBounds(\r\n      stations.map((st) => [st.lat, st.lng]) as [number, number][]\r\n    );\r\n\r\n    map.fitBounds(bounds, { padding: [50, 50] });\r\n  }, [stations, map]);\r\n\r\n  return null;\r\n}\r\n\r\n/* -------------------------------\r\n      Main Map Component\r\n-------------------------------- */\r\nexport default function StationMap({\r\n  stations,\r\n  center,\r\n  zoom = 13,\r\n}: StationMapProps) {\r\n  const [userPosition, setUserPosition] = useState<LatLngExpression | null>(\r\n    null\r\n  );\r\n\r\n  /* ----- Get user location (if allowed) ----- */\r\n  useEffect(() => {\r\n    if (!navigator.geolocation) return;\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        setUserPosition([pos.coords.latitude, pos.coords.longitude]);\r\n      },\r\n      () => {\r\n        // Permission denied or unavailable ‚Äì we simply ignore and use default\r\n        setUserPosition(null);\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <MapContainer\r\n      center={userPosition ?? center}\r\n      zoom={zoom}\r\n      className=\"w-full h-[350px] md:h-[450px] lg:h-[500px] rounded-lg\"\r\n      scrollWheelZoom={true}\r\n    >\r\n      {/* Map Tiles */}\r\n      <TileLayer\r\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OSM</a>'\r\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n      />\r\n\r\n      {/* Auto-fit map to station markers */}\r\n      {stations.length > 0 && <FitBounds stations={stations} />}\r\n\r\n      {/* Station markers */}\r\n      {stations.map((st) => (\r\n        <Marker key={st.id} position={[st.lat, st.lng]}>\r\n          <Popup>\r\n            <strong>{st.location}</strong>\r\n            <br />\r\n            Provider: {st.provider}\r\n            <br />\r\n            Price: {st.price.toFixed(2)} ‚Ç¨/kWh\r\n          </Popup>\r\n        </Marker>\r\n      ))}\r\n\r\n      {/* User location marker */}\r\n      {userPosition && (\r\n        <Marker position={userPosition}>\r\n          <Popup>You are here üìç</Popup>\r\n        </Marker>\r\n      )}\r\n    </MapContainer>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,yCAAyC;;;;;;AACzC;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;AAkBA;;iCAEiC,GACjC,SAAS,UAAU,EAAE,QAAQ,EAA2B;;IACtD,MAAM,MAAM,IAAA,sJAAM;IAElB,IAAA,uIAAS;+BAAC;YACR,IAAI,CAAC,YAAY,SAAS,MAAM,KAAK,GAAG;YAExC,MAAM,SAAS,IAAI,6JAAY,CAC7B,SAAS,GAAG;uCAAC,CAAC,KAAO;wBAAC,GAAG,GAAG;wBAAE,GAAG,GAAG;qBAAC;;YAGvC,IAAI,SAAS,CAAC,QAAQ;gBAAE,SAAS;oBAAC;oBAAI;iBAAG;YAAC;QAC5C;8BAAG;QAAC;QAAU;KAAI;IAElB,OAAO;AACT;GAdS;;QACK,sJAAM;;;KADX;AAmBM,SAAS,WAAW,EACjC,QAAQ,EACR,MAAM,EACN,OAAO,EAAE,EACO;;IAChB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,sIAAQ,EAC9C;IAGF,8CAA8C,GAC9C,IAAA,uIAAS;gCAAC;YACR,IAAI,CAAC,UAAU,WAAW,EAAE;YAE5B,UAAU,WAAW,CAAC,kBAAkB;wCACtC,CAAC;oBACC,gBAAgB;wBAAC,IAAI,MAAM,CAAC,QAAQ;wBAAE,IAAI,MAAM,CAAC,SAAS;qBAAC;gBAC7D;;wCACA;oBACE,sEAAsE;oBACtE,gBAAgB;gBAClB;;QAEJ;+BAAG,EAAE;IAEL,qBACE,0JAAC,mKAAY;QACX,QAAQ,gBAAgB;QACxB,MAAM;QACN,WAAU;QACV,iBAAiB;;0BAGjB,0JAAC,6JAAS;gBACR,aAAY;gBACZ,KAAI;;;;;;YAIL,SAAS,MAAM,GAAG,mBAAK,0JAAC;gBAAU,UAAU;;;;;;YAG5C,SAAS,GAAG,CAAC,CAAC,mBACb,0JAAC,uJAAM;oBAAa,UAAU;wBAAC,GAAG,GAAG;wBAAE,GAAG,GAAG;qBAAC;8BAC5C,cAAA,0JAAC,qJAAK;;0CACJ,0JAAC;0CAAQ,GAAG,QAAQ;;;;;;0CACpB,0JAAC;;;;;4BAAK;4BACK,GAAG,QAAQ;0CACtB,0JAAC;;;;;4BAAK;4BACE,GAAG,KAAK,CAAC,OAAO,CAAC;4BAAG;;;;;;;mBANnB,GAAG,EAAE;;;;;YAYnB,8BACC,0JAAC,uJAAM;gBAAC,UAAU;0BAChB,cAAA,0JAAC,qJAAK;8BAAC;;;;;;;;;;;;;;;;;AAKjB;IA7DwB;MAAA"}}]
}